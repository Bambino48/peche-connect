<section class="products-page">

  <!-- HEADER -->
  <div class="page-header">
    <div>
      <h1>Mes produits</h1>
      <p>Gérez vos produits de pêche (ajout, modification, suppression)</p>
    </div>

    <div class="page-actions">
      <button class="btn-primary" routerLink="/products/add">
        + Ajouter un produit
      </button>

      <button class="btn-secondary" routerLink="/actions">
        Retour
      </button>
    </div>
  </div>

  <!-- CHARGEMENT -->
  <div *ngIf="isLoading" class="loading-state">
    Chargement des produits...
  </div>

  <!-- ERREUR -->
  <div *ngIf="!isLoading && errorMessage" class="error-banner">
    ⚠️ {{ errorMessage }}
  </div>

  <!-- LISTE -->
  <ng-container *ngIf="!isLoading && !errorMessage">
    <div class="empty-state" *ngIf="(products$ | async)?.length === 0">
      Aucun produit pour le moment.
    </div>

    <div class="products-grid" *ngIf="(products$ | async)?.length">
      <div class="product-card" *ngFor="let product of (products$ | async)">
        <div class="card-header">
          <div>
            <h3>{{ product.nomLocal }}</h3>
            <span class="scientific">{{ product.nomScientifique }}</span>
          </div>

          <span class="status" [ngClass]="{
              available: product.etatProduit === 'Disponible',
              unavailable: product.etatProduit === 'Indisponible'
            }">
            {{ product.etatProduit }}
          </span>
        </div>

        <div class="card-body">
          <div><strong>Type :</strong> {{ product.typeProduit }}</div>
          <div><strong>Zone :</strong> {{ product.zonePeche }}</div>
          <div><strong>Date :</strong> {{ product.datePeche }}</div>
          <div><strong>Taille :</strong> {{ product.tailleMoyenne }} cm</div>
          <div><strong>Qualité :</strong> {{ product.qualite }}</div>
          <div><strong>Conservation :</strong> {{ product.modeConservation }}</div>
          <div><strong>Halal :</strong> {{ product.halal }}</div>
        </div>

        <div class="card-actions">
          <button class="btn-edit" [routerLink]="['/products/edit', product.id]">
            Modifier
          </button>

          <button class="btn-delete">
            Supprimer
          </button>
        </div>
      </div>
    </div>
  </ng-container>

</section>
